
import { valorInicial, filtrarAlteraciones } from './ui.js'; import { nombreAcorde, obtenerNotasActuales } from './logic.js'; import { reproducirArpegioMixto } from './sound.js'; window.addEventListener('DOMContentLoaded', () => { valorInicial(); filtrarAlteraciones(); nombreAcorde(); const ids = ["tonos", "alteracion", "alteracionM"]; ids.forEach(id => { document.getElementById(id).addEventListener("change", (e) => { if (id === "tonos") filtrarAlteraciones(); nombreAcorde(); if (typeof gtag === "function") { const valorSeleccionado = e.target.value; const nombreEvento = { tonos: "cambio_tono", alteracion: "cambio_tipo_acorde", alteracionM: "cambio_modo" }[id]; gtag("event", nombreEvento, { event_category: "interaccion_usuario", event_label: valorSeleccionado }); } }); }); const playBtn = document.getElementById("playChordBtn"); let reproduciendo = false; playBtn.addEventListener("click", () => { if (reproduciendo) return; const notas = obtenerNotasActuales(); if (notas.length === 0) return; reproduciendo = true; playBtn.disabled = true; reproducirArpegioMixto(notas); if (typeof gtag === "function") { gtag('event', 'reproducir_acorde', { event_category: 'interaccion_usuario', event_label: notas.join(', '), value: notas.length }); } setTimeout(() => { reproduciendo = false; playBtn.disabled = false; }, 3100); }); });