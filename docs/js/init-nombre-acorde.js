import{actualizarOpciones,verificarNotasValidas,detectarAcorde,obtenerNotasComoArray}from"./nombre-acorde.js";import{reproducirArpegioMixto}from"./sound.js";import{inicializarMenuHamburguesa}from"./menu.js";import{enviarEventoGA}from"./gtag-events.js";document.addEventListener("DOMContentLoaded",()=>{console.log("PÃ¡gina cargada: inicializando eventos"),actualizarOpciones(),document.getElementById("usarSeptima").addEventListener("change",e=>{actualizarOpciones(),enviarEventoGA("toggle_septima","interaccion_usuario",null,null,{estado:e.target.checked?"activada":"desactivada"})}),["notaUno","notaDos","notaTres","usarBemoles"].forEach(e=>{document.getElementById(e).addEventListener("change",t=>{actualizarOpciones(),"usarBemoles"!==e?registrarNota(e,t.target.value):enviarEventoGA("toggle_bemoles","interaccion_usuario",null,null,{estado:t.target.checked?"activado":"desactivado"})})}),document.getElementById("notaCuatro")?.addEventListener("change",e=>{registrarNota("notaCuatro",e.target.value)}),document.getElementById("detectarAcorde").addEventListener("click",()=>{detectarAcorde();const e=obtenerNotasComoArray();e.length>0&&enviarEventoGA("detectar_acorde","interaccion_usuario",e.join(", "),e.length,{incluye_septima:document.getElementById("usarSeptima").checked})});const e=document.getElementById("reproducirNotas");let t=!1;e.addEventListener("click",()=>{if(t)return;const a=obtenerNotasComoArray();a.length>0&&(t=!0,e.disabled=!0,reproducirArpegioMixto(a),enviarEventoGA("reproducir_acorde","interaccion_usuario",a.join(", "),a.length,{incluye_septima:document.getElementById("usarSeptima").checked})),setTimeout(()=>{t=!1,e.disabled=!1},3100)}),verificarNotasValidas()});const contadorNotas={notaUno:{},notaDos:{},notaTres:{},notaCuatro:{}};function registrarNota(e,t){contadorNotas[e][t]||(contadorNotas[e][t]=0),contadorNotas[e][t]++,enviarEventoGA("seleccion_nota","interaccion_usuario",t,null,{campo:e,total_selecciones:contadorNotas[e][t]})}